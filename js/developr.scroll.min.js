(function(d,H){function D(d){d.preventDefault()}function w(){var e=d(this),b=e.data("custom-scroll");b&&(e.data("scroll-focus",!0),b.hscrollbar()&&b.hscrollbar().animate({opacity:1}),b.vscrollbar()&&b.vscrollbar().animate({opacity:1}))}function x(){var e=d(this),b=e.data("custom-scroll");b&&(e.removeData("scroll-focus"),b.hscrollbar()&&b.hscrollbar().animate({opacity:0}),b.vscrollbar()&&b.vscrollbar().animate({opacity:0}))}function E(e,b,q,l){if(object=d(this).data("custom-scroll"))b=object.mousewheel(q,
l),(0!=b.x||0!=b.y||!object.settings.continuousWheelScroll)&&e.preventDefault()}function F(){d(this).refreshCustomScroll()}function G(e){var b=d(this),q=b.data("custom-scroll"),l=e.originalEvent.touches[0].pageX,c=e.originalEvent.touches[0].pageY,g,f,a;q&&!b.data("touch-scrolling")&&(g=function(d){b.data("touch-scrolling",!0);var e=d.originalEvent.touches[0].pageX,f=d.originalEvent.touches[0].pageY;a=q.move(l-e,f-c,!0);(0!==a.x||0!==a.y||!q.settings.continuousTouchScroll)&&d.preventDefault();l=e;
c=f},f=function(){b.off("touchmove",g);b.off("touchend touchcancel",f);b.removeData("touch-scrolling")},b.on("touchmove",g),b.on("touchend touchcancel",f))}var n=d(H),I=d("html").hasClass("touch");d.fn.customScroll=function(e){var b=d.extend({},d.fn.customScroll.defaults,e);this.filter(".custom-scroll").refreshCustomScroll();this.not(".custom-scroll").addClass("custom-scroll").each(function(){function e(b,d,f){var g=k,h=j;k=Math.max(0,Math.min(k+b,c[0].scrollWidth-c.innerWidth()));j=Math.max(0,Math.min(j-
d,c[0].scrollHeight-c.innerHeight()));a.animate&&!f&&s?c.stop(!0).animate({scrollLeft:k,scrollTop:j},{step:function(){c.refreshInnerTrackedElements()}}):c.scrollLeft(k).scrollTop(j).refreshInnerTrackedElements();r&&0!=b&&r();p&&0!=d&&p();return{x:k-g,y:j-h}}function l(){r&&h.hide();p&&m.hide();y=c[0].scrollWidth>c.innerWidth();t=c[0].scrollHeight>c.innerHeight();k=c.scrollLeft();j=c.scrollTop();r&&(z=!y&&a.autoHide,r());p&&(A=!t&&a.autoHide,p())}var c=d(this),g=c.css("position"),f=c.is("ul, ol")?
"li":"div",a=d.extend({},b,c.data("scroll-options")),y=c[0].scrollWidth>c.innerWidth(),t=c[0].scrollHeight>c.innerHeight(),k=c.scrollLeft(),j=c.scrollTop(),h,u,m,v,B=!1,C=!1,r=!1,p=!1,z=!1,A=!1,s=!1;"relative"!==g&&("absolute"!==g&&"fixed"!==g)&&c.css("position","relative");"object"!==typeof a.padding&&(a.padding={top:a.padding,right:a.padding,bottom:a.padding,left:a.padding});a.padding=d.extend({top:0,right:0,bottom:0,left:0},a.padding);a.horizontal&&(B=function(){h=d("<"+f+' class="custom-hscrollbar"></'+
f+">").appendTo(c);u=d("<div></div>").appendTo(h);h.click(function(a){a.stopPropagation()});u.on("selectstart",D);u.on("mousedown",function(b){function e(b){var f=h.width()-u.innerWidth();b=Math.max(0,Math.min(f,j+(b.pageX-g)));h[0].style.display="none";k=0<f?Math.round(b/f*(c[0].scrollWidth-c.innerWidth())):0;h[0].style.display="block";a.animate&&s?c.stop(!0).animate({scrollLeft:k},{step:function(){d(this).refreshInnerTrackedElements()}}):c.stop(!0).scrollLeft(k).refreshInnerTrackedElements();r&&
r();p&&p()}function f(){n.off("mousemove",e);n.off("mouseup",f)}var g=b.pageX,j=u.parseCSSValue("left");b.preventDefault();n.on("mousemove",e);n.on("mouseup",f)})},B(),r=function(){if(!z){h[0].parentNode||B();var b=c.width(),d=c.innerWidth(),f=(a.usePadding?b:d)-a.padding.top-a.padding.bottom-(a.vertical&&t&&!A?a.cornerWidth:0),e=f>1.5*a.minScrollerSize?a.minScrollerSize:Math.round(f/1.5),b=Math.round((f-e)*(b/c[0].scrollWidth))+e,d=Math.round((f-b)*(k/(c[0].scrollWidth-d)));h.show();h.stop(!0)[a.animate&&
s?"animate":"css"]({top:c.innerHeight()-(a.usePadding?c.parseCSSValue("padding-bottom")+a.padding.top:a.padding.bottom)-a.width+j+"px",left:(a.usePadding?c.parseCSSValue("padding-left")+a.padding.right:a.padding.left)+k+"px",width:f+"px",height:a.width+"px",opacity:c.data("scroll-focus")||!a.showOnHover?1:0});u.stop(!0)[a.animate&&s?"animate":"css"]({left:d+"px",width:Math.round(b)+"px"})}});a.vertical&&(C=function(){m=d("<"+f+' class="custom-vscrollbar"></'+f+">").appendTo(c);v=d("<div></div>").appendTo(m);
m.click(function(a){a.stopPropagation()});v.on("selectstart",D);v.on("mousedown",function(b){function f(b){var e=m.height()-v.innerHeight();b=Math.max(0,Math.min(e,h+(b.pageY-g)));m[0].style.display="none";j=0<e?Math.round(b/e*(c[0].scrollHeight-c.innerHeight())):0;m[0].style.display="block";a.animate&&s?c.stop(!0).animate({scrollTop:j},{step:function(){d(this).refreshInnerTrackedElements()}}):c.stop(!0).scrollTop(j).refreshInnerTrackedElements();r&&r();p&&p()}function e(a){a.preventDefault();n.off("mousemove",
f);n.off("mouseup",e)}var g=b.pageY,h=v.parseCSSValue("top");b.preventDefault();n.on("mousemove",f);n.on("mouseup",e)})},C(),p=function(){if(!A){m[0].parentNode||C();var b=c.height(),d=c.innerHeight(),e=(a.usePadding?b:d)-a.padding.top-a.padding.bottom-(a.horizontal&&y&&!z?a.cornerWidth:0),f=e>1.5*a.minScrollerSize?a.minScrollerSize:Math.round(e/1.5),b=(e-f)*(b/c[0].scrollHeight)+f,d=Math.round((e-b)*(j/(c[0].scrollHeight-d)));m.show();m.stop(!0)[a.animate&&s?"animate":"css"]({top:(a.usePadding?c.parseCSSValue("padding-top")+
a.padding.top:a.padding.top)+j+"px",left:c.innerWidth()-(a.usePadding?c.parseCSSValue("padding-right")+a.padding.right:a.padding.right)-a.width+k+"px",height:e+"px",width:a.width+"px",opacity:c.data("scroll-focus")||!a.showOnHover?1:0});v.stop(!0)[a.animate&&s?"animate":"css"]({top:d+"px",height:Math.round(b)+"px"})}});c.data("custom-scroll",{settings:a,hscrollbar:function(){return h},hscroller:function(){return u},vscrollbar:function(){return m},vscroller:function(){return v},refresh:l,refreshH:p,
refreshV:p,move:e,mousewheel:function(b,c,d){0!=b&&(b=0<b?Math.max(b,a.minWheelScroll):Math.min(b,-a.minWheelScroll));0!=c&&(c=0<c?Math.max(c,a.minWheelScroll):Math.min(c,-a.minWheelScroll));return e(b*a.speed,c*a.speed,d)}});l();if(a.showOnHover)if(h&&h.css({opacity:0}),m&&m.css({opacity:0}),I)c.on("touchstart",w).on("touchend",x);else c.on("mouseenter",w).on("mouseleave",x);s=!0}).on("mousewheel",E).on("scroll sizechange scrollsizechange",F).on("touchstart",G);return this};d.fn.removeCustomScroll=
function(){this.filter(".custom-scroll").off("mousewheel",E).off("scroll sizechange scrollsizechange",F).off("touchstart",G).off("touchstart",w).off("touchend",x).off("mouseenter",w).off("mouseleave",x).removeData("scroll-options").removeData("touch-scrolling").removeClass("custom-scroll").children(".custom-hscrollbar, .custom-vscrollbar").remove().scrollLeft(0).scrollTop(0);return this};d.fn.hasCustomScroll=function(){return this.data("custom-scroll")?!0:!1};d.fn.refreshCustomScroll=function(){this.each(function(){var e=
d(this).data("custom-scroll");e&&e.refresh()});return this};d.fn.moveCustomScroll=function(e,b,q){this.each(function(){var l=d(this).data("custom-scroll");l&&l.move(e,b,q)});return this};d.fn.scrollToReveal=function(){this.each(function(){var e=d(this);e.parents(".custom-scroll").each(function(){var b,q,l,c,g=d(this),f,a,n,t,k,j=0,h=0;if(a=g.data("custom-scroll"))f=e.offset(),b=g.offset(),f.top-=b.top+g.parseCSSValue("border-top-width"),f.left-=b.left+g.parseCSSValue("border-left-width"),n=e.outerWidth(),
t=e.outerHeight(),b=a.settings.usePadding?g.parseCSSValue("padding-top"):0,q=a.settings.usePadding?g.parseCSSValue("padding-right"):0,l=a.settings.usePadding?g.parseCSSValue("padding-bottom"):0,c=a.settings.usePadding?g.parseCSSValue("padding-left"):0,k=g.innerWidth(),g=g.innerHeight(),f.left<c?j=c-f.left:f.left+n>k-q&&(j=k-q-f.left-n),f.top<b?h=b-f.top:f.top+t>g-l&&(h=g-l-f.top-t),(0!==j||0!==h)&&a.move(j,h)})});return this};d.fn.customScroll.defaults={horizontal:!1,vertical:!0,usePadding:!1,padding:6,
width:8,cornerWidth:10,minScrollerSize:30,minWheelScroll:0.25,continuousWheelScroll:!0,continuousTouchScroll:!0,speed:48,animate:!1,showOnHover:!0,autoHide:!0};d.template.addSetupFunction(function(d,b){this.findIn(d,b,".scrollable").customScroll();return this})})(jQuery,document);