(function(b,n){b.fn.message=function(d,f){var g=b.extend({},b.fn.message.defaults,f),c;c=b();this.each(function(){var e=b(this),a=b.extend({},g,e.data("message-options")),f=["message"].concat(a.classes),h="bottom"!=a.position.toLowerCase(),n=h?a.append?"prependTo":"insertBefore":a.append?"appendTo":"insertAfter",r="a"===a.node.toLowerCase()?' href="'+a.link+'"':"",q=a.simpler?" simpler":"",m=a.inset?" inset":"",p=a.showCloseOnHover?" show-on-parent-hover":"",p=a.closable?'<span class="close'+m+p+
q+'">\u2715</span>':"",s=a.arrow&&-1<b.inArray(a.arrow.toLowerCase(),["top","right","bottom","left"])?'<span class="block-arrow '+a.arrow.toLowerCase()+'"><span></span></span>':"",l;l="";var k,j=!1;if(a.groupSimilar&&(h=a.append?e.childrenImmediates(".message",!h).not(".closing"):e[h?"prevImmediates":"nextImmediates"](".message").not(".closing"),h.each(function(){var a=b(this);if(a.data("message-text")===d)return j=a,!1}),j))return a.groupCount&&(e=j.children(".count"),0<e.length?e.text((parseInt(e.text(),
10)||1)+1):j.append('<span class="count left'+m+'">2</span>')),j.shake(),c=c.add(j),j;a.stripes&&(l=a.darkStripes?"dark-":"",m="big"===a.stripesSize||"thin"===a.stripesSize?a.stripesSize+"-":"",h=a.animatedStripes?" animated":"",l='<span class="'+l+m+"stripes"+h+'"></span>');k=b("<"+a.node+r+' class="'+f.join(" ")+q+'">'+l+d+p+s+"</"+a.node+">")[n](e);k.data("message-text",d);e.data("messages",(e.data("messages")||b()).add(k));c=c.add(k);a.animate&&k.hide().slideDown(a.animateSpeed);a.autoClose&&
setTimeout(function(){k.foldAndRemove()},a.autoClose)});return c};b.fn.clearMessages=function(d,f){"boolean"===typeof d&&(f=d,d="");f=f||f===n;this.each(function(){var g=b(this).data("messages"),c;g&&(d&&0<d.length?(c=b(),g.each(function(){b(this).data("message-text")===d&&(c=c.add(this))})):c=g,c.addClass("closing")[f?"foldAndRemove":"remove"](),c.length===g.length?b(this).removeData("messages"):b(this).data("messages",g.not(c)))});return this};b.fn.message.defaults={append:!0,position:"top",arrow:!1,
node:"p",link:"#",classes:[],stripes:!1,animatedStripes:!0,darkStripes:!0,stripesSize:"normal",simpler:!1,closable:!0,showCloseOnHover:!0,animate:!0,animateSpeed:"fast",groupSimilar:!0,groupCount:!0,inset:!1,autoClose:!1}})(jQuery);