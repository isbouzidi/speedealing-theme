(function(g,b,r,u){function x(){p||(p=g('<div id="top-notifications"></div>').appendTo(r.body));return p}function y(){m||(m=g('<div id="bottom-notifications"></div>').appendTo(r.body));return m}function v(c,e,d){var f=c.data("notifications-archive")||[];e=0<e?Math.min(f.length,e):f.length;var a,k;for(a=0;a<e;++a)k=f.shift(),b.notify(k.title,k.message,g.extend(k.options,{delay:100*a}),!0);if(0===f.length)return c.remove(),!1;archiveSize=f.length;c.text(1<archiveSize?d.textSeveralMore.replace("%d",
archiveSize):d.textOneMore);return!0}function w(c,b){c.data("notification-timeout",setTimeout(function(){c.fadeAndRemove().trigger("close")},b));c.hover(function(){clearTimeout(c.data("notification-timeout"))},function(){c.data("notification-timeout",setTimeout(function(){c.fadeAndRemove().trigger("close")},b))})}var z=g(r),p=!1,m=!1;b.notify=function(c,e,d,f){if(e==u||"object"===typeof e)d=e||{},e=c,c="";d=d||{};f=f||!1;if(!g.isReady||d!=u&&0<d.delay)setTimeout(function(){b.notify(c,e,g.extend(d,
{delay:0}),f)},d!=u?d.delay||40:40);else{d.vPos||(d.vPos=b.notify.defaults.vPos);d.hPos||(d.hPos=b.notify.defaults.hPos);var a=g.extend({},b.notify.defaults,b.notify.defaults[d.vPos.toLowerCase()],b.notify.defaults[d.hPos.toLowerCase()],b.notify.defaults[d.vPos.toLowerCase()+d.hPos.toLowerCase()],d);if(a.system&&b.notify.hasNotificationPermission()){var k=0<g.trim(c).length?c:r.title,h=b.webkitNotifications.createNotification(a.icon||"",k,e);if(a.autoClose||a.onDisplay)h.ondisplay=function(){a.onDisplay&&
a.onDisplay.call(h);a.autoClose&&setTimeout(function(){h.cancel()},a.closeDelay)};if(a.link&&0<a.link.length||a.onClick)h.onclick=function(){a.onClick&&a.onClick.call(h);a.link&&0<a.link.length&&(h.cancel(),r.location.href=a.link)};a.onClose&&(h.onclose=function(){a.onClose.call(h)});h.onerror=function(){a.onError&&!1===a.onError.call(h)||b.notify(c,e,g.extend(a,{system:!1}),f)};h.show()}else{var k=["notification"].concat(a.classes),q="notifications-"+a.vPos.toLowerCase()+"-"+a.hPos.toLowerCase(),
n=g("#"+q),p=a.icon&&0<a.icon.length?'<img class="notification-icon'+(a.iconOutside?" outside":"")+'" src="'+a.icon+'">':"",m="left"===a.hPos.toLowerCase()?"right":"left",m=0<p.length&&a.iconOutside?'<span class="block-arrow '+m+'"><span></span></span>':"",A=a.closeButton?'<span class="close'+(a.showCloseOnHover?" show-on-parent-hover":"")+'">\u2715</span>':"",B=0<g.trim(c).length?"<h3>"+c+"</h3>":"",s=0<a.title.length?' title="'+a.title+'"':"",s=0<a.link.length?'<a href="'+a.link+'"'+s+">":"<div"+
s+">",C=0<a.link.length?"</a>":"</div>",t=!1,l=n.children(".more-notifications"),j;0===n.length&&(n=g('<ul id="'+q+'"></ul>').appendTo("top"===a.vPos.toLowerCase()?x():y()));q=n.children().not(".closing").not(".more-notifications");a.groupSimilar&&q.each(function(){var b=g(this),f=b.data("notification-data"),h,j;if(f.title===c.toLowerCase()&&f.message===e.toLowerCase()){f=b.children(".extra-notifications");0<f.length?j=f.data("notifications-archive")||[]:(f=g('<p class="extra-notifications"></p>').appendTo(b),
j=[]);if(h=b.data("notification-timeout"))clearTimeout(h),b.off("mouseenter"),b.off("mouseleave");!a.stickGrouped&&(h||a.autoClose)&&w(b,a.closeDelay);j.push({title:c,message:e,options:d});h=j.length;f.text(1<h?a.textSeveralSimilars.replace("%d",h):a.textOneSimilar);f.data("notifications-archive",j);b.is(":animated")||b.shake(768<=z.width()?15:5);t=!0;return!1}});!t&&(0<a.limit&&q.length>=a.limit)&&(f||a.rotate?q.eq(0).addClass("closing").foldAndRemove():(0<l.length?archive=l.data("notifications-archive")||
[]:(l=g('<li class="notification more-notifications"></li>').appendTo(n),archive=[],l.click(function(){v(l,a.releaseLimit,a)})),archive.push({title:c,message:e,options:d}),archiveSize=archive.length,l.text(1<archiveSize?a.textSeveralMore.replace("%d",archiveSize):a.textOneMore),l.data("notifications-archive",archive),t=!0));if(!t){0===g.trim(c).length&&k.push("no-title");j=g('<li class="'+k.join(" ")+'">'+p+m+s+B+e+C+A+"</li>");0<l.length?j.insertBefore(l).hide().slideDown():j.appendTo(n).hide().fadeIn("slow");
a.onDisplay&&a.onDisplay.call(j[0]);if(a.onClick)j.children(":first").on("click",a.onClick);j.data("notification-data",{title:c.toLowerCase(),message:e.toLowerCase(),closeDelay:a.closeDelay});j.on("close",function(){j.addClass("closing");var b=n.children(".more-notifications");0<b.length&&(j.stop(!0).foldAndRemove(),v(b,1,a))});if(a.onClose)j.on("close",a.onClose);a.autoClose&&w(j,a.closeDelay)}}}};b.notify.hasNotificationAPI=function(){return!!b.webkitNotifications};b.notify.isNotificationPermissionSet=
function(){return b.notify.hasNotificationAPI()&&1!=b.webkitNotifications.checkPermission()};b.notify.hasNotificationPermission=function(){return b.notify.hasNotificationAPI()&&0==b.webkitNotifications.checkPermission()};b.notify.showNotificationPermission=function(c,e){var d=!1;if(b.notify.hasNotificationAPI()){if("string"===typeof c){if(!g.fn.message)return;c=d=g("#main").message(c,{node:"a",classes:["align-center","green-gradient"],simpler:!0,inset:!0})}c.click(function(c){c.target===this&&(c.preventDefault(),
b.webkitNotifications.requestPermission(function(){d&&d.fadeAndRemove();e&&"function"===typeof e&&e()}))})}};b.notify.defaults={system:!1,vPos:"top",hPos:"right",classes:[],link:"",title:"",icon:"",iconOutside:!0,closeButton:!0,showCloseOnHover:!0,autoClose:!0,closeDelay:8E3,delay:0,groupSimilar:!0,stickGrouped:!1,textOneSimilar:"One similar notification",textSeveralSimilars:"%d similar notifications",limit:7,rotate:!1,textOneMore:"One more notification",textSeveralMore:"%d more notifications",releaseLimit:5,
top:{},bottom:{},left:{},center:{},right:{},topleft:{},topcenter:{},topright:{},bottomleft:{},bottomcenter:{},bottomright:{},onDisplay:null,onClick:null,onClose:null,onError:null}})(jQuery,window,document);