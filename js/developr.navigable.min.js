(function(c,s,t){var e=!0;c(t).on("click",".navigable li, .navigable li > span, .navigable li > a",function(d){if(d.target===this){var a=c(this),j=c(this).closest("li"),b=j.children("ul:first"),l=j.parentsUntil(".navigable","ul"),m=l.eq(0),k=l.eq(-1),f=k.closest(".navigable"),n=c.extend({},c.template.navigable,f.data("navigable-options")),g=f.children(".back"),p,h=f.children(".load"),q,r;k.hasClass("fixed")||(f.height(k.outerHeight(!0)),k.addClass("fixed"));0===g.length&&(q=n.backText||"&nbsp;",g=
c('<div class="back"><span class="back-arrow"></span><span class="back-text">'+q+"</span></div>").prependTo(f).click(function(){var a=f.data("navigableCurrent"),c,b,d,j,h;if(a)c=a.parent().closest("ul"),c.hasClass("fixed")?(d=b=0,f.removeData("navigableCurrent"),g.stop(!0)[e?"animate":"css"]({marginTop:-g.outerHeight()+"px"})):(b=100*-c.parentsUntil(".navigable","ul").length,d=g.outerHeight(),f.data("navigableCurrent",c),n.backText?p.text(n.backText):(j=c.closest("li"),h=j.children("a, span").first(),
h.length||(h=j),p.text(h.contents().filter(function(){return 3==this.nodeType}).text()))),f.stop(!0)[e?"animate":"css"]({height:c.outerHeight(!0)+d+"px"}),k.stop(!0)[e?"animate":"css"]({left:b+"%"}),a.parent().closest("li").trigger("navigable-close");else g.stop(!0)[e?"animate":"css"]({marginTop:-g.outerHeight()+"px"})}),g.css({marginTop:-g.outerHeight()+"px"}));p=g.children(".back-text");if(0<h.length){q=f.data("navigableCurrent")||k;k.stop(!0)[e?"animate":"css"]({left:-(100*q.parentsUntil(".navigable",
"ul").length)+"%"},"fast");h.stop(!0).removeData("navigable-target");if(e){h.animate({right:"-10%"},"fast",function(){h.remove();a.click()});d.preventDefault();return}h.remove()}if(0<b.length)0===m.outerHeight(!0)&&3>l.length?(r=function(){0<m.outerHeight(!0)?(e=!1,a.click(),e=!0):setTimeout(r,40)},setTimeout(r,40)):(f.data("navigableCurrent",b),m.find("ul").hide(),l.show(),b.show(),b.add(l.not(":last")).each(function(){var a=c(this),b=a.parent();-1<c.inArray(b.css("position"),["relative","absolute"])&&
a.css("top",-b.position().top+"px")}),f.stop(!0).height(m.outerHeight(!0)+g.outerHeight(!0))[e?"animate":"css"]({height:b.outerHeight(!0)+g.outerHeight()+"px"}),k.stop(!0)[e?"animate":"css"]({left:-(100*l.length)+"%"}),g[e?"animate":"css"]({marginTop:0}),p.text(n.backText||a.contents().filter(function(){return 3==this.nodeType}).text()),j.trigger("navigable-open"),d.preventDefault());else if(a.hasClass("navigable-ajax")){if((b=a.is("a")?a.attr("href"):a.data("navigable-url"))&&"string"===typeof b&&
0<c.trim(b).length&&"#"!==b.substr(0,1))h=c('<div class="load" style="right: -10%"></div>').appendTo(f),h.data("navigable-target",this),k.stop(!0)[e?"animate":"css"]({left:-(100*(l.length-1)+10)+"%"}),h[e?"animate":"css"]({right:"0%"}),c.ajax(b,{error:function(c,b){var d=f.children(".load"),j;s.notify&&s.notify('Menu loading failed with the status "'+b+'"');0<d.length&&d.data("navigable-target")===a[0]&&(j=f.data("navigableCurrent")||k,k.stop(!0)[e?"animate":"css"]({left:-(100*j.parentsUntil(".navigable",
"ul").length)+"%"},"fast"),d.stop(!0).removeData("navigable-target"),e?d.animate({right:"-10%"},"fast",function(){d.remove()}):d.remove())},success:function(c){var b=f.children(".load");a.removeClass("navigable-ajax").addClass("navigable-ajax-loaded");j.append(c);0<b.length&&b.data("navigable-target")===a[0]&&(b.remove(),a.click())}}),d.preventDefault()}else a.hasClass("navigable-ajax-loaded")&&d.preventDefault()}});c.fn.navigableReset=function(){this.filter(".navigable").each(function(){var d=c(this),
a=d.children(".back");if(0<a.length)for(;d.data("navigableCurrent");)a.click()});return this};c.template.addSetupFunction(function(d,a){this.findIn(d,a,".navigable-current").each(function(){var a=c(this).closest("ul").closest("li, .navigable"),b;0<a.length&&!a.hasClass("navigable")&&(e=!1,b=a.children("a, span").first(),0<b.length?b.click():a.click(),e=!0)});return this});c.template.navigable={backText:!1}})(jQuery,window,document);